<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Data Vault Showcase</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        :root {
            --primary: #f71963;
            --primary-hover: #d91658;
            --primary-light-1: #ffc4dd;
            --primary-light-2: #ffe0ef;
            --primary-light-3: #fff3f6;
            --secondary: #142032;
            --secondary-light-1: #5b6e84;
            --secondary-light-2: #a1a8b7;
            --secondary-light-3: #E7E9EE;
            --balancing: #F5F9FF;
        }
        html {
            height: 100%;
        }
        body {
            height: 100%;
            font-family: 'Inter', sans-serif;
            background-color: var(--balancing);
            color: var(--secondary);
        }
        aside {
            height: 100%;
        }
        main {
            height: 100%;
            overflow-y: scroll;
        }
        .table-container {
            height: 250px; 
            overflow-y: auto;
        }
        .shipping-label {
            min-height: 150px;
        }
        .nav-item .icon-container {
            color: var(--secondary-light-1);
        }
        .nav-item .label {
             color: var(--secondary-light-1);
        }
        .nav-item.active .icon-container {
            background-color: var(--primary-light-2);
            color: var(--primary);
        }
        .nav-item.active .label {
            color: var(--primary);
            font-weight: 600;
        }
        .material-symbols-outlined {
            font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
        .divider {
            border-top: 1px solid #c1c7ce;
            width: 100%;
        }
        #vision-chip {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            border-radius: 17px;
            border: 1px solid #c1c7ce;
            padding: 4px;
            font-size: 0.8em;
            position: absolute;
            top: 4px;
            right: 0;
        }
        header {
            position: relative;
        }
    </style>
</head>
<body class="flex">

    <!-- Navigation Rail -->
    <aside class="w-24 flex-shrink-0 flex flex-col items-center justify-center">
        <nav id="nav-rail" class="w-full flex flex-col items-center p-2 space-y-2 ml-4">
            <!-- <div class="h-16 flex items-center justify-center -mt-16">
                <h2 class="text-xl font-bold text-[--primary]">Cases</h2>
            </div> -->
            <!-- Navigation Item 1: Checkout -->
            <a href="#" id="nav-checkout" class="nav-item flex flex-col items-center justify-center p-2 w-full rounded-lg text-center active" aria-current="page">
                <div class="icon-container flex items-center justify-center w-16 h-8 rounded-full">
                    <span class="material-symbols-outlined text-2xl">add_shopping_cart</span>
                </div>
                <span class="label text-xs mt-1">Tokenization</span>
            </a>
            <!-- Navigation Item 2: Fulfillment -->
            <a href="#" id="nav-fulfillment" class="nav-item flex flex-col items-center justify-center p-2 w-full rounded-lg hover:bg-gray-100 text-center">
                 <div class="icon-container flex items-center justify-center w-16 h-8 rounded-full">
                    <span class="material-symbols-outlined text-2xl">sell</span>
                </div>
                <span class="label text-xs mt-1">Detokenization</span>
            </a>
             <!-- Navigation Item 3: Data Rights -->
            <a href="#" id="nav-data-rights" class="nav-item flex flex-col items-center justify-center p-2 w-full rounded-lg hover:bg-gray-100 text-center">
                 <div class="icon-container flex items-center justify-center w-16 h-8 rounded-full">
                   <span class="material-symbols-outlined text-2xl">balance</span>
                </div>
                <span class="label text-xs mt-1">User Rights</span>
            </a>
            <!-- Navigation Item 4: Search -->
            <a href="#" id="nav-search" class="nav-item flex flex-col items-center justify-center p-2 w-full rounded-lg hover:bg-gray-100 text-center">
                 <div class="icon-container flex items-center justify-center w-16 h-8 rounded-full">
                   <span class="material-symbols-outlined text-2xl">search</span>
                </div>
                <span class="label text-xs mt-1">Search</span>
            </a>
             <!-- Navigation Item 5: Partial Search -->
            <a href="#" id="nav-partial-search" class="nav-item flex flex-col items-center justify-center p-2 w-full rounded-lg hover:bg-gray-100 text-center">
                 <div class="icon-container flex items-center justify-center w-16 h-8 rounded-full">
                   <span class="material-symbols-outlined text-2xl">find_in_page</span>
                </div>
                <span class="label text-xs mt-1">Partial Search</span>
            </a>
            <div class="divider"></div>
            <a href="dev-portal.html" target="_blank" id="nav-dev-portal-link" class="nav-item flex flex-col items-center justify-center p-2 w-full rounded-lg hover:bg-gray-100 text-center">
                <div class="icon-container flex items-center justify-center w-16 h-8 rounded-full">
                  <span class="material-symbols-outlined text-2xl">terminal</span>
               </div>
               <span class="label text-xs mt-1">API</span>
           </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1">
        <!-- View 1: Checkout Demo -->
        <div id="checkout-view" class="view-container">
            <div class="container mx-auto p-4 md:p-8">
                <header class="text-center mb-10">
                    <h1 class="text-3xl font-bold">Personal Data Vault</h1>
                    <p class="text-md text-[--secondary-light-1] mt-2">Use Case 1: Tokenization at Checkout</p>
                    <a id="vision-chip" href="#"><img src="https://upload.wikimedia.org/wikipedia/commons/e/ec/GDocs_Favicon_Recreation.png" style="width: 16px" class="inline-block mr-1"/><span>Personal Data Vault product vision</span></a>
                </header>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Left Panel: Use Case -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <h2 class="text-2xl font-semibold mb-6 text-center border-b pb-4">Checkout Form</h2>
                        <div class="mb-6">
                            <label for="account-selector" class="block text-sm font-medium mb-2">Select Store (Account):</label>
                            <select id="account-selector" class="mt-1 block w-full px-3 py-2 bg-white border border-[--secondary-light-3] rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-[--primary] focus:border-[--primary]">
                                <option value="FashionA">FashionA</option>
                                <option value="FashionB">FashionB</option>
                            </select>
                        </div>
                        <div class="mb-6 border-t border-b py-6">
                            <h3 class="text-lg font-semibold mb-4">Your Cart</h3>
                            <div class="space-y-4 text-sm">
                                <div class="flex justify-between items-center"><span class="text-[--secondary-light-1]">White T-Shirt</span><span class="font-medium">$25.00</span></div>
                                <div class="flex justify-between items-center"><span class="text-[--secondary-light-1]">Pair of Socks</span><span class="font-medium">$8.00</span></div>
                            </div>
                        </div>
                        <form id="checkout-form" class="space-y-6">
                            <div><label for="name" class="block text-sm font-medium">Full Name</label><input type="text" id="name" class="mt-1 block w-full px-3 py-2 border border-[--secondary-light-3] rounded-md" placeholder="Jane Doe" required></div>
                            <div><label for="email" class="block text-sm font-medium">Email Address</label><input type="email" id="email" class="mt-1 block w-full px-3 py-2 border border-[--secondary-light-3] rounded-md" placeholder="jane.doe@example.com" required></div>
                            <div><label for="address" class="block text-sm font-medium">Shipping Address</label><input type="text" id="address" class="mt-1 block w-full px-3 py-2 border border-[--secondary-light-3] rounded-md" placeholder="123 Main St, Anytown, USA" required></div>
                            <div><label for="credit-card" class="block text-sm font-medium">Credit Card</label><input type="text" id="credit-card" class="mt-1 block w-full px-3 py-2 bg-[--secondary-light-3] border-[--secondary-light-3] rounded-md" value="**** **** **** 4242" disabled></div>
                            <div class="border-t pt-6"><div class="flex justify-between items-center text-lg font-semibold"><span>Total Price:</span><span>$33.00</span></div></div>
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-white bg-[--primary] hover:bg-[--primary-hover]">Complete Purchase</button>
                        </form>
                    </div>
                    <!-- Right Panel: Data Flow -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex justify-between items-center mb-4 border-b pb-4">
                             <h2 class="text-2xl font-semibold">Data Flow</h2>
                             <button class="seed-data-btn bg-[--secondary-light-3] text-[--secondary-light-1] px-3 py-1 rounded hover:bg-[#d8dbe0] text-sm">Seed Dummy Data</button>
                        </div>
                        <div class="mb-8">
                            <h3 class="text-xl font-semibold mb-3 text-[--primary]">1. Personal Data Vault</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">Securely stores raw PII, a context-aware token, and a context-less fingerprint.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Data Subject</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Raw Data</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Fingerprint</th></tr></thead><tbody id="vault-db-checkout" class="bg-white divide-y"></tbody></table></div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-[--secondary]">2. Orders Database</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">Stores searchable fingerprints alongside the tokens for each relevant field.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Items</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Fingerprint</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Email Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Address Token</th></tr></thead><tbody id="orders-db-checkout" class="bg-white divide-y"></tbody></table></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- View 2: Order Fulfillment Demo -->
        <div id="fulfillment-view" class="view-container hidden">
             <div class="container mx-auto p-4 md:p-8">
                <header class="text-center mb-10">
                    <h1 class="text-3xl font-bold">Personal Data Vault</h1>
                    <p class="text-md text-[--secondary-light-1] mt-2">Use Case 2: Detokenization for Order Fulfillment</p>
                </header>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Left Panel: Use Case -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <h2 class="text-2xl font-semibold mb-4 text-center border-b pb-4">Fulfillment Dashboard</h2>
                        <p class="text-sm text-[--secondary-light-1] mb-3">Click "Create Shipping Label" to securely retrieve the customer's real name and address for shipping by detokenizing the required PII.</p>
                        <div class="table-container border rounded-lg mb-6">
                             <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50 sticky top-0 z-1">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="fulfillment-orders-db" class="bg-white divide-y divide-gray-200"></tbody>
                            </table>
                        </div>
                         <h3 class="text-xl font-semibold mb-3">Generated Shipping Label</h3>
                         <div id="shipping-label" class="shipping-label border-2 border-dashed rounded-lg flex items-center justify-center p-4 bg-[--balancing]">
                            <span class="text-[--secondary-light-1]">Select an order to generate a label</span>
                         </div>
                    </div>
                    <!-- Right Panel: Data Flow -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex justify-between items-center mb-4 border-b pb-4">
                             <h2 class="text-2xl font-semibold">Data Flow</h2>
                             <button class="seed-data-btn bg-[--secondary-light-3] text-[--secondary-light-1] px-3 py-1 rounded hover:bg-[#d8dbe0] text-sm">Seed Dummy Data</button>
                        </div>
                        <div class="mb-8">
                            <h3 class="text-xl font-semibold mb-3 text-[--secondary]">1. Orders Database</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">The fulfillment system queries the orders database and receives tokenized information for the selected order.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Items</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Fingerprint</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Email Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Address Token</th></tr></thead><tbody id="orders-db-fulfillment" class="bg-white divide-y"></tbody></table></div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-[--primary]">2. Personal Data Vault</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">To create the shipping label, the system requests the detokenization of the Name and Address tokens from the Vault.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Data Subject</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Raw Data</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Fingerprint</th></tr></thead><tbody id="vault-db-fulfillment" class="bg-white divide-y"></tbody></table></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

         <!-- View 3: Data Rights Demo -->
        <div id="data-rights-view" class="view-container hidden">
             <div class="container mx-auto p-4 md:p-8">
                <header class="text-center mb-10">
                    <h1 class="text-3xl font-bold">Personal Data Vault</h1>
                    <p class="text-md text-[--secondary-light-1] mt-2">Use Case 3: Data Subject Rights</p>
                </header>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Left Panel: Use Case -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <h2 class="text-2xl font-semibold mb-4 text-center border-b pb-4">Data Subject Request</h2>
                        <div class="space-y-4">
                             <div>
                                <label for="dsr-account-selector" class="block text-sm font-medium">Store (Account)</label>
                                <select id="dsr-account-selector" class="mt-1 block w-full px-3 py-2 bg-white border border-[--secondary-light-3] rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-[--primary] focus:border-[--primary]">
                                    <option value="FashionA">FashionA</option>
                                    <option value="FashionB">FashionB</option>
                                </select>
                            </div>
                            <div>
                                <label for="dsr-email" class="block text-sm font-medium">Data Subject Email</label>
                                <input type="email" id="dsr-email" class="mt-1 block w-full px-3 py-2 border border-[--secondary-light-3] rounded-md" placeholder="john.smith@example.com" required>
                            </div>
                            <div class="flex space-x-4">
                                <button id="dsr-list-btn" class="w-full bg-[--secondary-light-1] text-white px-4 py-2 rounded hover:bg-[--secondary-light-2]">List Information</button>
                                <button id="dsr-forget-btn" class="w-full bg-[--primary] text-white px-4 py-2 rounded hover:bg-[--primary-hover]">Forget Me</button>
                            </div>
                        </div>
                        <div class="mt-6 border-t pt-6">
                            <h3 class="text-xl font-semibold mb-3">Retrieved Information</h3>
                            <div id="dsr-results" class="bg-[--balancing] p-4 rounded-lg min-h-[200px]">
                                <span class="text-[--secondary-light-1]">Submit a request to see data.</span>
                            </div>
                        </div>
                    </div>
                    <!-- Right Panel: Data Flow -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex justify-between items-center mb-4 border-b pb-4">
                             <h2 class="text-2xl font-semibold">Data Flow</h2>
                             <button class="seed-data-btn bg-[--secondary-light-3] text-[--secondary-light-1] px-3 py-1 rounded hover:bg-[#d8dbe0] text-sm">Seed Dummy Data</button>
                        </div>
                        <div class="mb-8">
                            <h3 class="text-xl font-semibold mb-3 text-[--primary]">1. Personal Data Vault</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">The system finds all records for the data subject to either list or mask their information.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Data Subject</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Raw Data</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Fingerprint</th></tr></thead><tbody id="vault-db-dsr" class="bg-white divide-y"></tbody></table></div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-[--secondary]">2. Orders Database</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">The orders database remains unchanged as it contains no raw PII.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Items</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Fingerprint</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Email Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Address Token</th></tr></thead><tbody id="orders-db-dsr" class="bg-white divide-y"></tbody></table></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- View 4: Search Demo -->
        <div id="search-view" class="view-container hidden">
             <div class="container mx-auto p-4 md:p-8">
                <header class="text-center mb-10">
                    <h1 class="text-3xl font-bold">Personal Data Vault</h1>
                    <p class="text-md text-[--secondary-light-1] mt-2">Use Case 4: PII Search Limitations</p>
                </header>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Left Panel: Use Case -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <h2 class="text-2xl font-semibold mb-4 text-center border-b pb-4">Order Search</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="search-name" class="block text-sm font-medium">Search by Customer Name</label>
                                <div class="mt-1 flex rounded-md shadow-sm">
                                    <input type="text" id="search-name" class="flex-1 block w-full px-3 py-2 border border-[--secondary-light-3] rounded-none rounded-l-md" placeholder="John Smith" required>
                                    <button id="search-btn" class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-[--secondary-light-3] bg-[--secondary-light-3] text-[--secondary-light-1] hover:bg-[#d8dbe0]">Search</button>
                                </div>
                                <p class="mt-2 text-xs text-[--secondary-light-1]">Note: Partial matches are not supported. Please enter the full name.</p>
                            </div>
                        </div>
                        <div class="mt-6 border-t pt-6">
                            <h3 class="text-xl font-semibold mb-3">Search Results</h3>
                            <div id="search-results-container" class="table-container border rounded-lg">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50 sticky top-0 z-1">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Address</th>
                                        </tr>
                                    </thead>
                                    <tbody id="search-results-db" class="bg-white divide-y divide-gray-200">
                                        <tr><td colspan="3" class="text-center p-4 text-[--secondary-light-1]">Enter a name to search for orders.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- Right Panel: Data Flow -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex justify-between items-center mb-4 border-b pb-4">
                             <h2 class="text-2xl font-semibold">Data Flow</h2>
                             <button class="seed-data-btn bg-[--secondary-light-3] text-[--secondary-light-1] px-3 py-1 rounded hover:bg-[#d8dbe0] text-sm">Seed Dummy Data</button>
                        </div>
                        <div class="mb-6">
                            <h3 class="text-xl font-semibold mb-3 text-[--primary]">1. Input to Fingerprint Transformation</h3>
                             <p class="text-sm text-[--secondary-light-1] mb-3">The search term is transformed into a context-less fingerprint.</p>
                            <div class="border rounded-lg p-2"><table class="min-w-full"><tbody id="token-transformation-search"></tbody></table></div>
                        </div>
                        <div class="mb-6">
                            <h3 class="text-xl font-semibold mb-3 text-[--secondary]">2. Orders Database</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">The database is queried with an exact match on the Name Fingerprint to find relevant orders.</p>
                            <div class="table-container border rounded-lg" style="height: 180px;"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Items</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Fingerprint</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Email Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Address Token</th></tr></thead><tbody id="orders-db-search" class="bg-white divide-y"></tbody></table></div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-[--secondary]">3. Personal Data Vault</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">The tokens from the found orders can be traced back to the Vault. Detokenization is not possible from a fingerprint.</p>
                            <div class="table-container border rounded-lg" style="height: 180px;"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Data Subject</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Raw Data</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Fingerprint</th></tr></thead><tbody id="vault-db-search" class="bg-white divide-y"></tbody></table></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

         <!-- View 5: Partial Search Demo -->
        <div id="partial-search-view" class="view-container hidden">
             <div class="container mx-auto p-4 md:p-8">
                <header class="text-center mb-10">
                    <h1 class="text-3xl font-bold">Personal Data Vault</h1>
                    <p class="text-md text-[--secondary-light-1] mt-2">Use Case 5: Partial Search</p>
                </header>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Left Panel: Use Case -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <h2 class="text-2xl font-semibold mb-4 text-center border-b pb-4">Order Search (Partial)</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="partial-search-name" class="block text-sm font-medium">Search by Customer Name</label>
                                <div class="mt-1 flex rounded-md shadow-sm">
                                    <input type="text" id="partial-search-name" class="flex-1 block w-full px-3 py-2 border border-[--secondary-light-3] rounded-md" placeholder="John" required>
                                </div>
                            </div>
                        </div>
                         <div class="mt-4 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700">
                            <p class="font-bold">Warning!</p>
                            <p class="text-sm">To enable partial search, all orders were fetched and their PII detokenized. This can lead to excessive requests to the Vault and is not recommended. Try to use other strategies to narrow down the number of detokenizations required</p>
                        </div>
                        <div class="mt-6 border-t pt-6">
                            <h3 class="text-xl font-semibold mb-3">Search Results</h3>
                            <div class="table-container border rounded-lg">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50 sticky top-0 z-1">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Customer Name</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th>
                                        </tr>
                                    </thead>
                                    <tbody id="partial-search-results-db" class="bg-white divide-y divide-gray-200">
                                        <tr><td colspan="3" class="text-center p-4 text-[--secondary-light-1]">All orders are loaded. Use the search bar above.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- Right Panel: Data Flow -->
                    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex justify-between items-center mb-4 border-b pb-4">
                             <h2 class="text-2xl font-semibold">Data Flow</h2>
                             <button class="seed-data-btn bg-[--secondary-light-3] text-[--secondary-light-1] px-3 py-1 rounded hover:bg-[#d8dbe0] text-sm">Seed Dummy Data</button>
                        </div>
                        <div class="mb-8">
                            <h3 class="text-xl font-semibold mb-3 text-[--secondary]">1. Orders Database</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">The system first queries its entire orders database.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Order ID</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Items</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Name Fingerprint</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Email Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Address Token</th></tr></thead><tbody id="orders-db-partial-search" class="bg-white divide-y"></tbody></table></div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-[--primary]">2. Personal Data Vault</h3>
                            <p class="text-sm text-[--secondary-light-1] mb-3">A bulk request is made to detokenize all names, exposing the raw data for client-side search.</p>
                            <div class="table-container border rounded-lg"><table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0 z-1"><tr><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Store</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Data Subject</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Raw Data</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Token</th><th class="px-4 py-3 text-left text-xs font-medium text-[--secondary-light-1] uppercase">Fingerprint</th></tr></thead><tbody id="vault-db-partial-search" class="bg-white divide-y"></tbody></table></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- Application State ---
        let vaultData = [];
        let ordersData = [];

        // --- DOM Element Selection ---
        const navRail = document.getElementById('nav-rail');
        const checkoutView = document.getElementById('checkout-view');
        const fulfillmentView = document.getElementById('fulfillment-view');
        const dataRightsView = document.getElementById('data-rights-view');
        const searchView = document.getElementById('search-view');
        const partialSearchView = document.getElementById('partial-search-view');
        
        // --- All View Elements ---
        const allVaultDbs = {
            checkout: document.getElementById('vault-db-checkout'),
            fulfillment: document.getElementById('vault-db-fulfillment'),
            dsr: document.getElementById('vault-db-dsr'),
            search: document.getElementById('vault-db-search'),
            partialSearch: document.getElementById('vault-db-partial-search')
        };
        const allOrdersDbs = {
            checkout: document.getElementById('orders-db-checkout'),
            fulfillment: document.getElementById('orders-db-fulfillment'),
            dsr: document.getElementById('orders-db-dsr'),
            search: document.getElementById('orders-db-search'),
            partialSearch: document.getElementById('orders-db-partial-search')
        };
        
        // Use Case Specific Elements
        const checkoutForm = document.getElementById('checkout-form');
        const accountSelector = document.getElementById('account-selector');
        const fulfillmentOrdersDbBody = document.getElementById('fulfillment-orders-db');
        const shippingLabel = document.getElementById('shipping-label');
        const dsrAccountSelector = document.getElementById('dsr-account-selector');
        const dsrEmailInput = document.getElementById('dsr-email');
        const dsrListBtn = document.getElementById('dsr-list-btn');
        const dsrForgetBtn = document.getElementById('dsr-forget-btn');
        const dsrResults = document.getElementById('dsr-results');
        const searchNameInput = document.getElementById('search-name');
        const searchBtn = document.getElementById('search-btn');
        const searchResultsDb = document.getElementById('search-results-db');
        const tokenTransformationSearch = document.getElementById('token-transformation-search');
        const partialSearchNameInput = document.getElementById('partial-search-name');
        const partialSearchResultsDb = document.getElementById('partial-search-results-db');

        // --- Navigation Logic ---
        navRail.addEventListener('click', (event) => {
            const targetNavItem = event.target.closest('.nav-item');
            if (!targetNavItem || targetNavItem.id=='nav-dev-portal-link') return;

            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            targetNavItem.classList.add('active');

            document.querySelectorAll('.view-container').forEach(view => view.classList.add('hidden'));

            if (targetNavItem.id === 'nav-checkout') {
                checkoutView.classList.remove('hidden');
                renderCheckoutView();
            } else if (targetNavItem.id === 'nav-fulfillment') {
                fulfillmentView.classList.remove('hidden');
                renderFulfillmentView();
            } else if (targetNavItem.id === 'nav-data-rights') {
                dataRightsView.classList.remove('hidden');
                renderDataRightsView();
            } else if (targetNavItem.id === 'nav-search') {
                searchView.classList.remove('hidden');
                renderSearchView();
            } else if (targetNavItem.id === 'nav-partial-search') {
                partialSearchView.classList.remove('hidden');
                renderPartialSearchView();
            }
        });

        // --- Hashing & Fingerprinting Functions ---
        function generateSimpleHash(str, dataSubject, account) {
            const combinedString = `${str}::${dataSubject}::${account}`;
            let hash = 0;
            for (let i = 0; i < combinedString.length; i++) {
                hash = ((hash << 5) - hash) + combinedString.charCodeAt(i);
                hash |= 0;
            }
            return `pdv_${Math.abs(hash).toString(16).slice(0, 8)}`;
        }

        function generateFingerprint(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                hash = ((hash << 5) - hash) + str.charCodeAt(i);
                hash |= 0;
            }
            return `fp_${Math.abs(hash).toString(16).slice(0, 8)}`;
        }
        
        // --- Data Rendering Functions ---
        function renderTable(tbodyElement, data, rowRenderer) {
            tbodyElement.innerHTML = '';
            data.forEach(item => {
                const row = rowRenderer(item);
                tbodyElement.appendChild(row);
            });
        }

        // --- Checkout View Logic ---
        function renderCheckoutView() {
            renderTable(allVaultDbs.checkout, vaultData, createVaultRow);
            renderTable(allOrdersDbs.checkout, ordersData, createOrderRow);
        }

        checkoutForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const account = accountSelector.value;
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const address = document.getElementById('address').value;

            if (!name || !email || !address) { return; }

            const nameToken = generateSimpleHash(name, email, account);
            const emailToken = generateSimpleHash(email, email, account);
            const addressToken = generateSimpleHash(address, email, account);
            const nameFingerprint = generateFingerprint(name);
            const emailFingerprint = generateFingerprint(email);
            const addressFingerprint = generateFingerprint(address);
            const orderId = `ORD-${Date.now().toString().slice(-6)}`;

            vaultData.push({ store: account, dataSubject: email, rawData: name, token: nameToken, fingerprint: nameFingerprint });
            vaultData.push({ store: account, dataSubject: email, rawData: email, token: emailToken, fingerprint: emailFingerprint });
            vaultData.push({ store: account, dataSubject: email, rawData: address, token: addressToken, fingerprint: addressFingerprint });
            
            ordersData.push({ orderId, store: account, items: ['t-shirt-white', 'socks-pair'], nameToken, nameFingerprint, emailToken, addressToken });

            renderCheckoutView();
            checkoutForm.reset();
        });

        function createVaultRow({ store, dataSubject, rawData, token, fingerprint }) {
            const newRow = document.createElement('tr');
            newRow.dataset.token = token;
            newRow.dataset.subject = dataSubject;
            newRow.dataset.store = store;
            newRow.className = 'transition-all duration-300 ease-in-out';
            newRow.innerHTML = `<td class="px-4 py-3 text-sm">${store}</td><td class="px-4 py-3 text-sm text-[--secondary-light-1]">${dataSubject}</td><td class="px-4 py-3 text-sm">${rawData}</td><td class="px-4 py-3 text-sm text-[--primary] font-mono">${token}</td><td class="px-4 py-3 text-sm text-blue-600 font-mono">${fingerprint}</td>`;
            return newRow;
        }

        function createOrderRow({ orderId, store, items, nameToken, nameFingerprint, emailToken, addressToken }) {
            const newRow = document.createElement('tr');
            newRow.dataset.orderId = orderId;
            newRow.className = 'transition-all duration-300 ease-in-out';
            newRow.innerHTML = `<td class="px-4 py-3 text-sm">${orderId}</td><td class="px-4 py-3 text-sm">${store}</td><td class="px-4 py-3 text-sm text-[--secondary-light-1]">${items.join(', ')}</td><td class="px-4 py-3 text-sm text-green-600 font-mono">${nameToken}</td><td class="px-4 py-3 text-sm text-blue-600 font-mono">${nameFingerprint}</td><td class="px-4 py-3 text-sm text-green-600 font-mono">${emailToken}</td><td class="px-4 py-3 text-sm text-green-600 font-mono">${addressToken}</td>`;
            return newRow;
        }

        // --- Fulfillment Logic ---
        function renderFulfillmentView() {
            renderTable(allVaultDbs.fulfillment, vaultData, createVaultRow);
            renderTable(allOrdersDbs.fulfillment, ordersData, createOrderRow);
            
            fulfillmentOrdersDbBody.innerHTML = '';
            shippingLabel.innerHTML = '<span class="text-[--secondary-light-1]">Select an order to generate a label</span>';
            if (ordersData.length === 0) {
                fulfillmentOrdersDbBody.innerHTML = '<tr><td colspan="3" class="text-center p-4 text-[--secondary-light-1]">No orders placed yet.</td></tr>';
                return;
            }
            ordersData.forEach(order => {
                const newRow = document.createElement('tr');
                newRow.innerHTML = `<td class="px-4 py-3 text-sm">${order.orderId}</td><td class="px-4 py-3 text-sm">${order.store}</td><td class="px-4 py-3 text-sm"><button data-order-id="${order.orderId}" class="create-label-btn bg-[--secondary-light-1] text-white px-3 py-1 rounded hover:bg-[--secondary-light-2]">Create Shipping Label</button></td>`;
                fulfillmentOrdersDbBody.appendChild(newRow);
            });
        }
        
        fulfillmentOrdersDbBody.addEventListener('click', (event) => {
            if (!event.target.classList.contains('create-label-btn')) return;
            const orderId = event.target.dataset.orderId;
            const order = ordersData.find(o => o.orderId === orderId);
            const tokensToHighlight = [order.nameToken, order.addressToken];

            allVaultDbs.fulfillment.querySelectorAll('tr').forEach(row => {
                row.classList.toggle('shadow-lg', tokensToHighlight.includes(row.dataset.token));
                row.classList.toggle('opacity-20', !tokensToHighlight.includes(row.dataset.token));
            });
            
            allOrdersDbs.fulfillment.querySelectorAll('tr').forEach(row => {
                row.classList.toggle('shadow-lg', row.dataset.orderId === orderId);
                row.classList.toggle('opacity-20', row.dataset.orderId !== orderId);
            });

            const name = detokenize(order.nameToken);
            const address = detokenize(order.addressToken);

            if (name && address) {
                 shippingLabel.innerHTML = `<div class="text-left p-4"><p class="font-bold text-lg">${name}</p><p>${address}</p></div>`;
            } else {
                 shippingLabel.innerHTML = `<div class="text-left p-4 text-[--primary]"><p>Could not retrieve shipping information.</p></div>`;
            }
        });
        
        function detokenize(tokenToFind) {
            const vaultEntry = vaultData.find(entry => entry.token === tokenToFind);
            return vaultEntry ? vaultEntry.rawData : null;
        }

        // --- Data Rights Logic ---
        function renderDataRightsView() {
            renderTable(allVaultDbs.dsr, vaultData, createVaultRow);
            renderTable(allOrdersDbs.dsr, ordersData, createOrderRow);
            dsrResults.innerHTML = '<span class="text-[--secondary-light-1]">Submit a request to see data.</span>';
        }

        dsrListBtn.addEventListener('click', () => {
            const email = dsrEmailInput.value;
            const store = dsrAccountSelector.value;
            if (!email) return;

            const subjectData = vaultData.filter(d => d.dataSubject === email && d.store === store);
            dsrResults.innerHTML = '';

            if (subjectData.length > 0) {
                const list = document.createElement('ul');
                list.className = 'space-y-2';
                subjectData.forEach(item => {
                    const listItem = document.createElement('li');
                    listItem.className = 'text-sm';
                    listItem.innerHTML = `<span class="font-semibold">${item.store}:</span> ${item.rawData}`;
                    list.appendChild(listItem);
                });
                dsrResults.appendChild(list);
            } else {
                dsrResults.innerHTML = '<span class="text-[--secondary-light-1]">No data found for this email in this store.</span>';
            }

            allVaultDbs.dsr.querySelectorAll('tr').forEach(row => {
                 const isMatch = row.dataset.subject === email && row.dataset.store === store;
                 row.classList.toggle('shadow-lg', isMatch);
                 row.classList.toggle('opacity-20', !isMatch);
            });
        });
        
        dsrForgetBtn.addEventListener('click', () => {
            const email = dsrEmailInput.value;
            const store = dsrAccountSelector.value;
            if (!email) return;

            vaultData.forEach(entry => {
                if (entry.dataSubject === email && entry.store === store) {
                    entry.rawData = maskData(entry.rawData);
                }
            });
            dsrResults.innerHTML = `<span class="text-[--primary]">Masking request processed for ${email} in store ${store}.</span>`;
            renderDataRightsView();
             allVaultDbs.dsr.querySelectorAll('tr').forEach(row => {
                 if(row.dataset.subject === email && row.dataset.store === store) {
                    row.classList.add('shadow-lg', 'bg-[--primary-light-3]');
                 }
            });
        });

        function maskData(data) {
            if (data.includes('@')) {
                const parts = data.split('@');
                const user = parts[0];
                return `${user[0]}***@${parts[1]}`;
            }
            return data.split(' ').map(word => word[0] + '*'.repeat(word.length - 1)).join(' ');
        }
        
        // --- Search Logic ---
        function renderSearchView() {
            renderTable(allVaultDbs.search, vaultData, createVaultRow);
            renderTable(allOrdersDbs.search, ordersData, createOrderRow);
            searchResultsDb.innerHTML = '<tr><td colspan="3" class="text-center p-4 text-[--secondary-light-1]">Enter a name to search for orders.</td></tr>';
            tokenTransformationSearch.innerHTML = '';
        }

        searchBtn.addEventListener('click', () => {
            const searchName = searchNameInput.value;
            if (!searchName) return;

            const nameFingerprint = generateFingerprint(searchName);
            
            tokenTransformationSearch.innerHTML = `<tr><td class="px-2 py-1 text-sm text-right">${searchName}</td><td class="px-2 py-1 text-sm text-center">→</td><td class="px-2 py-1 text-sm text-blue-600 font-mono">${nameFingerprint}</td></tr>`;

            const foundOrders = ordersData.filter(order => order.nameFingerprint === nameFingerprint);

            searchResultsDb.innerHTML = '';
            if (foundOrders.length > 0) {
                 foundOrders.forEach(order => {
                    const address = detokenize(order.addressToken) || 'N/A';
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `<td class="px-4 py-3 text-sm">${order.orderId}</td><td class="px-4 py-3 text-sm">${order.store}</td><td class="px-4 py-3 text-sm text-[--secondary-light-1]">${address}</td>`;
                    searchResultsDb.appendChild(newRow);
                });
            } else {
                 searchResultsDb.innerHTML = '<tr><td colspan="3" class="text-center p-4 text-[--secondary-light-1]">No orders found for this name.</td></tr>';
            }
           
            const addressTokensToHighlight = foundOrders.map(o => o.addressToken);
            allVaultDbs.search.querySelectorAll('tr').forEach(row => {
                 const isMatch = addressTokensToHighlight.includes(row.dataset.token);
                 row.classList.toggle('shadow-lg', isMatch);
                 row.classList.toggle('opacity-20', !isMatch);
            });

            const foundOrderIds = foundOrders.map(o => o.orderId);
            allOrdersDbs.search.querySelectorAll('tr').forEach(row => {
                const isMatch = foundOrderIds.includes(row.dataset.orderId);
                row.classList.toggle('shadow-lg', isMatch);
                row.classList.toggle('opacity-20', !isMatch);
            });
        });

        // --- Partial Search Logic ---
         function renderPartialSearchView() {
            renderTable(allVaultDbs.partialSearch, vaultData, createVaultRow);
            renderTable(allOrdersDbs.partialSearch, ordersData, createOrderRow);
            partialSearchResultsDb.innerHTML = '<tr><td colspan="3" class="text-center p-4 text-[--secondary-light-1]">All orders are loaded. Use the search bar above.</td></tr>';
            
            // Remove any highlighting from previous actions
            allVaultDbs.partialSearch.querySelectorAll('tr').forEach(row => row.classList.remove('shadow-lg', 'opacity-20'));
            allOrdersDbs.partialSearch.querySelectorAll('tr').forEach(row => row.classList.remove('shadow-lg', 'opacity-20'));
        }

        partialSearchNameInput.addEventListener('keyup', () => {
            const searchTerm = partialSearchNameInput.value.toLowerCase();
            
            // In a real scenario, this is highly inefficient. Here we simulate it.
            const allOrdersWithDetokenizedNames = ordersData.map(order => {
                return { ...order, rawName: detokenize(order.nameToken) };
            });

            const foundOrders = searchTerm 
                ? allOrdersWithDetokenizedNames.filter(order => order.rawName.toLowerCase().includes(searchTerm))
                : allOrdersWithDetokenizedNames;

            partialSearchResultsDb.innerHTML = '';
            if (foundOrders.length > 0) {
                 foundOrders.forEach(order => {
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `<td class="px-4 py-3 text-sm">${order.orderId}</td><td class="px-4 py-3 text-sm">${order.rawName}</td><td class="px-4 py-3 text-sm">${order.store}</td>`;
                    partialSearchResultsDb.appendChild(newRow);
                });
            } else {
                 partialSearchResultsDb.innerHTML = `<tr><td colspan="3" class="text-center p-4 text-[--secondary-light-1]">No orders found for "${searchTerm}".</td></tr>`;
            }
        });


        // --- Seeding Logic ---
        function seedData() {
            vaultData = [];
            ordersData = [];
            
            const dummyData = [
                { name: 'John Smith', email: 'john.smith@example.com', address: '456 Oak Ave, Othertown, USA', account: 'FashionA'},
                { name: 'Maria Garcia', email: 'maria.garcia@example.com', address: '789 Pine St, Anycity, USA', account: 'FashionB'},
                { name: 'John Smith', email: 'john.smith@example.com', address: '456 Oak Ave, Othertown, USA', account: 'FashionB'},
            ];

            dummyData.forEach(({name, email, address, account}) => {
                const nameToken = generateSimpleHash(name, email, account);
                const emailToken = generateSimpleHash(email, email, account);
                const addressToken = generateSimpleHash(address, email, account);
                const nameFingerprint = generateFingerprint(name);
                const emailFingerprint = generateFingerprint(email);
                const addressFingerprint = generateFingerprint(address);
                const orderId = `ORD-${Math.random().toString(36).substr(2, 6).toUpperCase()}`;

                vaultData.push({ store: account, dataSubject: email, rawData: name, token: nameToken, fingerprint: nameFingerprint });
                vaultData.push({ store: account, dataSubject: email, rawData: email, token: emailToken, fingerprint: emailFingerprint });
                vaultData.push({ store: account, dataSubject: email, rawData: address, token: addressToken, fingerprint: addressFingerprint });
                ordersData.push({ orderId, store: account, items: ['hat-red', 'scarf-blue'], nameToken, nameFingerprint, emailToken, addressToken });
            });
            
            const activeNav = document.querySelector('.nav-item.active').id;
            if (activeNav === 'nav-checkout') renderCheckoutView();
            else if (activeNav === 'nav-fulfillment') renderFulfillmentView();
            else if (activeNav === 'nav-data-rights') renderDataRightsView();
            else if (activeNav === 'nav-search') renderSearchView();
            else if (activeNav === 'nav-partial-search') renderPartialSearchView();
        }
        
        document.querySelectorAll('.seed-data-btn').forEach(button => {
            button.addEventListener('click', seedData);
        });

        // Initial render
        renderCheckoutView();
    </script>
</body>
</html>
